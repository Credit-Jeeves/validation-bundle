imports:
    - { resource: ../base/config.yml }
    - { resource: ../parameters.yml } # would be generated from parameters_SERVER.yml depends on SERVER
    - { resource: security.yml } #different for each application
    - { resource: payum.yml }
    - { resource: ../base/fos.yml }
    - { resource: ../base/doctrine.yml }
    - { resource: ../base/jms.yml }
    - { resource: ../base/swiftmailer.yml }
    - { resource: ../base/assetic.yml }
    - { resource: ../base/email.yml }
    - { resource: ../base/sonata.yml }
    - { resource: ../base/framework.yml }
    - { resource: ../base/twig.yml }
    - { resource: ../cj/twig.yml }
    - { resource: ../base/apy_js_form_validation.yml }
    - { resource: ../base/fos_oauth_server.yml }

sensio_framework_extra:
    view:
        annotations: false

parameters:
    server_name: '%server_name_cj%'
    support_email: help@creditjeeves.com
    support_phone: (866)-976-6622

    email_from: support@creditjeeves.com
    email_name: Credit Jeeves

    external_urls:
        main_site: 'www.creditjeeves.com'
        user_voice: 'creditjeeves.uservoice.com'

framework:
    router:
        resource: "%kernel.root_dir%/config/cj/routing.yml"
    session:
        name: cj

twig:
    exception_controller: 'CreditJeeves\ApiBundle\Controller\ExceptionController::showAction'
    globals:
        application: cj

sonata_admin:
    dashboard:
        blocks:
            # display a dashboard block
            - { position: left, type: sonata.admin.block.admin_list }
        groups:
            admin: ~
            CreditJeeves:
                items:
                    - sonata.admin.cj_group
                    - sonata.admin.dealer
                    - sonata.admin.applicant

#api: # Do you use it?
#    admin_dealer_code: %api.admin_dealer_code%
#    client_id: %api.client_id%
#    client_secret: %api.client_secret%

fos_rest:
    param_fetcher_listener: true
    body_listener: true
    format_listener: true
    view:
        view_response_listener: 'force'
    allowed_methods_listener: true
    exception:
        codes:
            'Symfony\Component\Routing\Exception\ResourceNotFoundException': 404
            'Doctrine\ORM\OptimisticLockException': HTTP_CONFLICT
            'Symfony\Component\Routing\Exception\MethodNotAllowedException': 405
            'Symfony\Component\HttpKernel\Exception\HttpException': 400
        messages:
            'Symfony\Component\Routing\Exception\ResourceNotFoundException': true
            'Symfony\Component\HttpKernel\Exception\HttpException': true
            'Symfony\Component\Routing\Exception\MethodNotAllowedException': true
    serializer:
        serialize_null: true
        groups: [CreditJeeves]
