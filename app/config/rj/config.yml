imports:
    - { resource: ../base/config.yml }
    - { resource: ../base/sonata.yml }
    - { resource: ../parameters.yml } # would be generated from parameters_SERVER.yml depends on SERVER
    - { resource: security.yml } #different for each application
    - { resource: ../base/fos.yml }
    - { resource: ../base/doctrine.yml }
    - { resource: ../base/jms.yml }
    - { resource: ../base/swiftmailer.yml }
    - { resource: ../base/assetic.yml }
    - { resource: ../base/email.yml }
    - { resource: ../base/framework.yml }
    - { resource: ../base/twig.yml }
    - { resource: ../rj/twig.yml }
    - { resource: ../base/apy_js_form_validation.yml }
    - { resource: ../base/fos_oauth_server.yml }
    - { resource: ../base/aci.yml }

parameters:
    server_name: '%server_name_rj%'
    support_email: help@renttrack.com
    support_phone: (866) 841-9090

    email_from: no-reply@renttrack.com
    email_name: RentTrack

    rt_merchant_name: 'RentTrackCorp'

    property_management:
        name: 'RENTTRACK'
        address: '13911 RIDGEDALE DR # 401C MINNETONKA MN 55305'
        phone: '8668419090'

    external_urls:
        main_site: 'www.renttrack.com'
        user_voice: 'help.renttrack.com'

    partners:
        price: 0
        product: 'registration'

# parameters for twig
    payment_bank_fee: 0 # feeACH would be processed on heartland side
    payment_card_fee: 2.95% # feeCC
    payment_dollars: $20
    payment_one_time_until_value: '21:50' # 01:59
    tenant_payment_per_month_curence: $
    tenant_payment_per_month_dollars: 1
    tenant_payment_per_month_cents: 95
    credittrack_payment_per_month_currency: $
    credittrack_payment_per_month_dollars: 9
    credittrack_payment_per_month_cents: 95
    credittrack_payment_per_month: %credittrack_payment_per_month_dollars%.%credittrack_payment_per_month_cents%
    landlord_monthly_minimum: $9.95
    landlord_per_screen: $14.95
    landlord_payment_per_month_dollars: 2
    landlord_payment_per_month_cents: 49
framework:
    session:
        name: rj
        cookie_secure: true
        cookie_httponly: true
        handler_id: session.handler.pdo
    router:
        resource: "%kernel.root_dir%/config/rj/routing.yml"

sonata_admin:
    title:      Admin
    title_logo: /bundles/rjpublic/images/logo-new.png
    templates:
        layout:  RjAdminBundle::standard_layout.html.twig
    dashboard:
        blocks:
            # display a dashboard block
            - { position: left, type: sonata.admin.block.admin_list }
        groups:
            admin:
              items:
                - rj_email.email_admin
                - sonata.admin.admin
                - sonata.admin.orders
                - sonata.admin.operations
                - sonata.admin.jobs
                - sonata.admin.settings
            RentJeeves:
              items:
                - sonata.admin.payments
#                - sonata.admin.payment.accounts
                - sonata.admin.rj_holding
                - sonata.admin.rj_group
                - sonata.admin.landlord
                - sonata.admin.tenant
                - sonata.admin.contract_waiting
                - sonata.admin.resident_mapping
                - sonata.admin.property_mapping
                - sonata.admin.unit_mapping
                - sonata.admin.partners

twig:
    exception_controller: FOS\RestBundle\Controller\ExceptionController::showAction
    globals:
        application: rj
        google_maps_key: %google_maps_key%
        payment_card_fee: %payment_card_fee%
        payment_dollars: %payment_dollars%
        credittrack_payment_per_month: %credittrack_payment_per_month_currency%%credittrack_payment_per_month%
        credittrack_payment_per_month_dollars: %credittrack_payment_per_month_dollars%
        credittrack_payment_per_month_cents: %credittrack_payment_per_month_cents%
        tenant_payment_per_month: %tenant_payment_per_month_curence%%tenant_payment_per_month_dollars%.%tenant_payment_per_month_cents%
        tenant_payment_per_month_dollars: %tenant_payment_per_month_dollars%
        tenant_payment_per_month_cents: %tenant_payment_per_month_cents%
        landlord_monthly_minimum: %landlord_monthly_minimum%
        landlord_per_screen: %landlord_per_screen%
        landlord_payment_per_month_dollars: %landlord_payment_per_month_dollars%
        landlord_payment_per_month_cents: %landlord_payment_per_month_cents%
        

doctrine:
    orm:
        mappings:
            heartland:
                is_bundle: false
                type: xml
                dir: %kernel.root_dir%/../vendor/payum/heartland/src/Payum/Heartland/Bridge/Doctrine/Resources/mapping
                prefix: Payum\Heartland\Bridge\Doctrine\Entity

stof_doctrine_extensions:
    class:
        loggable: RentJeeves\DataBundle\EventListener\LoggableListener

payum:
    contexts:
        heartland:
            heartland:
                api:
                    options: %heartland%
        simple_purchase_authorize_net:
            authorize_net_aim:
                api:
                    options: %authorize_net%

services:
    pdo:
        class: PDO
        arguments:
            - "mysql:host=%database_host%;dbname=%database_name%"
            - "%database_user%"
            - "%database_password%"
        calls:
            - [setAttribute, [3, 2]] # \PDO::ATTR_ERRMODE, \PDO::ERRMODE_EXCEPTION
    session.handler.pdo:
        class:     Symfony\Component\HttpFoundation\Session\Storage\Handler\PdoSessionHandler
        arguments: ["@pdo", "%pdo.db_options%"]
    geocode_cache_adapter:
        class: "Doctrine\\Common\\Cache\\ApcCache"

bazinga_geocoder:
    providers:
        cache:
            adapter:  geocode_cache_adapter
            provider: google_maps
            lifetime: 3456000 # 40 days
        google_maps:
            api_key:  %google_maps_key%
            use_ssl:  true

be_simple_soap:
    clients:
        amsi_leasing:
            wsdl: ExternalApiBundle:AMSI:leasing.html.twig
        amsi_ledger:
            wsdl: ExternalApiBundle:AMSI:ledger.html.twig
        yardi_resident_transactions:
            wsdl: ExternalApiBundle:Yardi:ItfResidentTransactions20.html.twig
        yardi_resident_data:
            wsdl: ExternalApiBundle:Yardi:ItfResidentData.html.twig
        yardi_payment:
            wsdl: ExternalApiBundle:Yardi:ItfResidentTransactions20_SysBatch.html.twig

fos_rest:
    param_fetcher_listener: 'force'
    body_listener: true
    format_listener: true
    view:
        view_response_listener: 'force'
        formats:
            xml: false
            json: true
        templating_formats:
            html: true
        force_redirects:
            html: true
        failed_validation: HTTP_BAD_REQUEST
        default_engine: twig
        exception_wrapper_handler: RentJeeves\ApiBundle\ErrorHandler\ApiExceptionWrapperHandler
    exception:
        codes: ~
    routing_loader:
        default_format: json

sensio_framework_extra:
    view:
      annotations: false
    router:
      annotations: true
