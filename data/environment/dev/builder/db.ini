[drop dev db]
command="php bin/console.php --app=rj doctrine:database:drop --force"
@class=Hat\Environment\Builder\ExecuteCommand
@required=false

[create dev db]
command="php bin/console.php --app=rj doctrine:database:create"
@class=Hat\Environment\Builder\ExecuteCommand

[create dev schema]
command="php bin/console.php --app=rj doctrine:schema:create"
@class=Hat\Environment\Builder\ExecuteCommand
@depends=create dev db

[create dev session table]
command="php bin/console.php --app=rj --env=dev database:restore 'doctrine.dbal.default_connection' data/files/session_create_storage.sql"
@class=Hat\Environment\Builder\ExecuteCommand
@depends=create dev db

[load dev fixtures]
command="php bin/console.php --app=rj khepin:yamlfixtures:load --env=dev"
@class=Hat\Environment\Builder\ExecuteCommandRaw
@depends=create dev schema

[drop test db]
command="php bin/console.php --app=rj doctrine:database:drop --force --env=test"
@class=Hat\Environment\Builder\ExecuteCommand
@required=false

[create test db]
command="php bin/console.php --app=rj doctrine:database:create --env=test"
@class=Hat\Environment\Builder\ExecuteCommand

[create test schema]
command="php bin/console.php --app=rj doctrine:schema:create --env=test"
@class=Hat\Environment\Builder\ExecuteCommand
@depends=create test db

[create test session table]
command="php bin/console.php --app=rj --env=test database:restore 'doctrine.dbal.default_connection' data/files/session_create_storage.sql"
@class=Hat\Environment\Builder\ExecuteCommand
@depends=create test db

[backup empty test DB]
command="php bin/console.php --app=rj --env=test database:backup empty.sql"
@class=Hat\Environment\Builder\ExecuteCommand

[load test fixtures]
command="php bin/console.php --app=rj khepin:yamlfixtures:load --env=test"
@class=Hat\Environment\Builder\ExecuteCommandRaw
@depends=create test schema

[backup test DB]
command="php bin/console.php --app=rj --env=test database:backup"
@class=Hat\Environment\Builder\ExecuteCommand
