{% extends "LandlordBundle::base.html.twig" %}

{% block content %}
    <div class="sub-menu">
        {{ knp_menu_render('LandlordBundle:Builder:accountingMenu', { 'template': '::menu.html.twig' }) }}
    </div>
    <div class="container-content">
        <div id="action_plan_page">
            <div class="column-middle floatleft">
                <div id="reviewContainer" class="pod-middle pod-border pod-padding shadow">
                    {{
                    include(
                    'LandlordBundle:Accounting:importSteps.html.twig',
                        {
                            'step': 'step3',
                        }
                    )
                    }}
                    <br />
                    <br />
                    <div class="errorMessage" data-bind="
                            visible: $root.errorLoadDataMessage().length > 0,
                            text: $root.errorLoadDataMessage()
                    ">
                    </div>
                    <table class="properties-table zebra-grid" data-bind="visible: $root.isVisibleTable()">
                        <thead>
                        <tr class="properties-th">
                            <th class="pie-el status"><span>{{ 'import.status'|trans }}</span></th>
                            <th class="pie-el unit"><span>{{ 'import.unit'|trans }}*</span></th>
                            <th class="pie-el resident"><span>{{ 'import.residentId'|trans }}*</span></th>
                            <th class="pie-el"><span>{{ 'import.first_name'|trans }}*</span></th>
                            <th class="pie-el"><span>{{ 'import.last_name'|trans }}*</span></th>
                            <th class="pie-el"><span>{{ 'import.email'|trans }}*</span></th>
                            <th class="pie-el">
                                <span>
                                    {{ 'import.rent'|trans }} <br />
                                    {{ 'import.balance'|trans }}
                                </span>
                            </th>
                            <th class="pie-el dates">
                                <span>
                                    {{ 'import.move_in'|trans }}
                                    <br />
                                    {{ 'import.lease_end'|trans }}
                                </span>
                            </th>
                            <th class="pie-el">
                                <span>
                                    {{ 'import.pmt.amt'|trans }}
                                    <br />
                                    {{ 'import.pmt.date'|trans }}
                                </span>
                            </th>
                            <th class="pie-el"><span>{{ 'import.action'|trans }}</span></th>
                        </tr>
                        </thead>
                        <tbody data-bind="foreach: $root.rows">
                            {{
                                include(
                                    'LandlordBundle:Accounting:_reviewNewUserWithContract.html.twig',
                                    {
                                    'form': formNewUserWithContract,
                                    }
                                )
                            }}
                            {{
                                include(
                                    'LandlordBundle:Accounting:_reviewUpdateCreateContract.html.twig',
                                    {
                                    'form': formContract,
                                    }
                                )
                            }}
                            {{
                                include(
                                    'LandlordBundle:Accounting:_reviewSkip.html.twig',
                                    {
                                        'form': formContractFinish
                                    }
                                )
                            }}
                        </tbody>
                    </table>
                    <br />
                    <br />
                    <div class="button-box"  data-bind="visible: $root.isVisibleTable()">
                        <a href="{{ path("accounting_match_file") }}" class="button small fixed next grey prev">
                            <span>{{ 'pay_popup.step.previous'|trans }}</span>
                        </a>
                        <button type="submit"
                                class="button small submitImportFile"
                                data-bind="visible: $root.errorLoadDataMessage().length <= 0"
                        >
                            <span  data-bind="click: function(data, event) { submitForms() }">
                                {{ 'import.review.and.post'|trans }}
                            </span>
                        </button>
                    </div>
                    <div data-bind="if: isFinishReview">
                        <center><h3>{{ 'import.review.finish'|trans }}</h3></center>
                    </div>
                </div>
            </div>
            <div class="clear"></div>
        </div>
    </div>
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {% stylesheets
    '@LandlordBundle/Resources/public/css/submenu.css'
    '@LandlordBundle/Resources/public/css/stepImport.css'
    '@LandlordBundle/Resources/public/css/import.css'
    %}
    <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock %}

{% block javascripts %}
    {% javascripts
        '@RjComponentBundle/Resources/public/js/bindingHandlersDatepicker.js'
        'bundles/bazingajstranslation/js/translator.min.js'
        '@LandlordBundle/Resources/public/js/accountingImport.js'
        '@RjCoreBundle/Resources/public/js/jquery-ui.js'
        '@LandlordBundle/Resources/public/js/importBase.js'
    %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
    <script type="text/javascript" src="{{ url('bazinga_jstranslation_js') }}"></script>
{% endblock %}
